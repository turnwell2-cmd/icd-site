<?php// sp.php - create a new tracking record// Includesinclude __DIR__ . '/includes/netlib.php';   // keep if you need itinclude __DIR__ . '/includes/db_connect.php';// Collect form fields (adjust names to match your HTML form)$customer_name = trim($_POST['customer_name'] ?? ($_GET['customer_name'] ?? 'Unknown'));$origin = trim($_POST['origin'] ?? ($_GET['origin'] ?? 'N/A'));$destination = trim($_POST['destination'] ?? ($_GET['destination'] ?? 'N/A'));$notes = trim($_POST['notes'] ?? '');// Generate a unique tracking number (adjust format as desired)function make_tracking_number() {    // Example: 2 letters + 8 hex characters    $prefix = 'IC'; // change prefix if desired    $random = strtoupper(substr(md5(uniqid((string)mt_rand(), true)), 0, 8));    return $prefix . $random;}// Ensure uniqueness (try a few times)$tries = 0;$tracking_number = '';while ($tries < 5) {    $candidate = make_tracking_number();    $stmt = $db->prepare("SELECT COUNT(*) FROM tracking WHERE tracking_number = :t");    $stmt->execute([':t' => $candidate]);    $count = (int)$stmt->fetchColumn();    if ($count === 0) { $tracking_number = $candidate; break; }    $tries++;}if ($tracking_number === '') { die("Failed to generate a unique tracking number. Try again."); }// Insert recordtry {    $insert = $db->prepare("INSERT INTO tracking (tracking_number, customer_name, origin, destination, status, notes)                            VALUES (:tracking, :customer, :origin, :destination, :status, :notes)");    $insert->execute([        ':tracking' => $tracking_number,        ':customer' => $customer_name,        ':origin' => $origin,        ':destination' => $destination,        ':status' => 'In Transit',        ':notes' => $notes    ]);} catch (PDOException $e) {    die("Database insert failed: " . htmlspecialchars($e->getMessage()));}// Output a simple success page (you can style this or redirect as needed)?><!doctype html><html lang="en"><head><meta charset="utf-8"><title>Tracking Created</title></head><body>  <h1>Tracking number created</h1>  <p>Your tracking number is: <strong><?php echo htmlspecialchars($tracking_number); ?></strong></p>  <p><a href="tracking.php">Track a package</a></p>  <p><a href="admin.php">Admin dashboard</a></p></body></html>